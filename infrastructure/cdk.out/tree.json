{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.220.0"},"children":{"HospupVideoProcessing":{"id":"HospupVideoProcessing","path":"HospupVideoProcessing","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"FFmpegWorkerRepository":{"id":"FFmpegWorkerRepository","path":"HospupVideoProcessing/FFmpegWorkerRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"lifecyclePolicy":{"lifecyclePolicyText":"{\"rules\":[{\"rulePriority\":1,\"description\":\"Keep last 10 images\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":10},\"action\":{\"type\":\"expire\"}}]}"},"repositoryName":"hospup-ffmpeg-worker","tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}}}},"VideoJobsDLQ":{"id":"VideoJobsDLQ","path":"HospupVideoProcessing/VideoJobsDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/VideoJobsDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"hospup-video-jobs-dlq","tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}}}},"VideoJobsQueue":{"id":"VideoJobsQueue","path":"HospupVideoProcessing/VideoJobsQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/VideoJobsQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"hospup-video-jobs","receiveMessageWaitTimeSeconds":20,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["VideoJobsDLQ38A190E5","Arn"]},"maxReceiveCount":3},"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"visibilityTimeout":900}}}}},"DefaultVPC":{"id":"DefaultVPC","path":"HospupVideoProcessing/DefaultVPC","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"HospupVideoProcessing/DefaultVPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"HospupVideoProcessing/DefaultVPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"PublicSubnet3":{"id":"PublicSubnet3","path":"HospupVideoProcessing/DefaultVPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"VideoProcessingCluster":{"id":"VideoProcessingCluster","path":"HospupVideoProcessing/VideoProcessingCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/VideoProcessingCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"hospup-video-processing","clusterSettings":[{"name":"containerInsights","value":"enabled"}],"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}}}},"TaskExecutionRole":{"id":"TaskExecutionRole","path":"HospupVideoProcessing/TaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportTaskExecutionRole":{"id":"ImportTaskExecutionRole","path":"HospupVideoProcessing/TaskExecutionRole/ImportTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"HospupVideoProcessing/TaskExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}],"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"HospupVideoProcessing/TaskExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/TaskExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FFmpegWorkerRepository5105CA11","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["WorkerLogGroup31FDBE4A","Arn"]}}],"Version":"2012-10-17"},"policyName":"TaskExecutionRoleDefaultPolicyA84DD1B0","roles":[{"Ref":"TaskExecutionRole250D2532"}]}}}}}}},"TaskRole":{"id":"TaskRole","path":"HospupVideoProcessing/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"HospupVideoProcessing/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"HospupVideoProcessing/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"HospupVideoProcessing/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:ListBucket","s3:PutObject"],"Effect":"Allow","Resource":["arn:aws:s3:::hospup-files","arn:aws:s3:::hospup-files/*"]},{"Action":["sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","Arn"]}}],"Version":"2012-10-17"},"policyName":"TaskRoleDefaultPolicy07FC53DE","roles":[{"Ref":"TaskRole30FC0FBB"}]}}}}}}},"FFmpegWorkerTask":{"id":"FFmpegWorkerTask","path":"HospupVideoProcessing/FFmpegWorkerTask","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerTask/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["FFmpegWorkerRepository5105CA11","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["FFmpegWorkerRepository5105CA11","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"FFmpegWorkerRepository5105CA11"},":latest"]]},"name":"ffmpeg-worker","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"WorkerLogGroup31FDBE4A"},"awslogs-stream-prefix":"worker","awslogs-region":"eu-west-1"}},"environment":[{"name":"AWS_DEFAULT_REGION","value":"eu-west-1"},{"name":"SQS_QUEUE_URL","value":{"Ref":"VideoJobsQueue6A6D39CE"}},{"name":"WEBHOOK_URL","value":"https://web-production-b52f.up.railway.app/api/v1/videos/ffmpeg-callback"}]}],"cpu":"2048","executionRoleArn":{"Fn::GetAtt":["TaskExecutionRole250D2532","Arn"]},"family":"hospup-ffmpeg-worker","memory":"4096","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"taskRoleArn":{"Fn::GetAtt":["TaskRole30FC0FBB","Arn"]}}}},"ffmpeg-worker":{"id":"ffmpeg-worker","path":"HospupVideoProcessing/FFmpegWorkerTask/ffmpeg-worker","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.220.0"}}}},"WorkerLogGroup":{"id":"WorkerLogGroup","path":"HospupVideoProcessing/WorkerLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/WorkerLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/hospup-ffmpeg-worker","retentionInDays":7,"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}]}}}}},"FFmpegWorkerService":{"id":"FFmpegWorkerService","path":"HospupVideoProcessing/FFmpegWorkerService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.220.0","metadata":[]},"children":{"Service":{"id":"Service","path":"HospupVideoProcessing/FFmpegWorkerService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"capacityProviderStrategy":[{"capacityProvider":"FARGATE_SPOT","base":0,"weight":1}],"cluster":{"Ref":"VideoProcessingClusterE2F64E8F"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":90},"desiredCount":10,"enableEcsManagedTags":false,"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"ENABLED","subnets":["subnet-0073707940ca0e822","subnet-091879920bbd5dcc0","subnet-0f04f3ca712c46189"],"securityGroups":[{"Fn::GetAtt":["FFmpegWorkerServiceSecurityGroup9F964BE3","GroupId"]}]}},"serviceName":"ffmpeg-worker-service","tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"taskDefinition":{"Ref":"FFmpegWorkerTask308EF108"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"HospupVideoProcessing/FFmpegWorkerService/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"HospupVideoProcessing/FFmpegWorkerService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"vpcId":"vpc-042f1f8b980622d82"}}}}},"ScalingRole":{"id":"ScalingRole","path":"HospupVideoProcessing/FFmpegWorkerService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.220.0"},"children":{"Target":{"id":"Target","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":50,"minCapacity":10,"resourceId":{"Fn::Join":["",["service/",{"Ref":"VideoProcessingClusterE2F64E8F"},"/",{"Fn::GetAtt":["FFmpegWorkerService16FCD97D","Name"]}]]},"roleArn":"arn:aws:iam::412655955859:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"SQSScaling":{"id":"SQSScaling","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingPolicy","version":"2.220.0"},"children":{"LowerPolicy":{"id":"LowerPolicy","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/LowerPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingAction","version":"2.220.0"},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/LowerPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"HospupVideoProcessingFFmpegWorkerServiceTaskCountTargetSQSScalingLowerPolicyCD39907B","policyType":"StepScaling","scalingTargetId":{"Ref":"FFmpegWorkerServiceTaskCountTargetACF53073"},"stepScalingPolicyConfiguration":{"adjustmentType":"ChangeInCapacity","cooldown":30,"metricAggregationType":"Maximum","stepAdjustments":[{"metricIntervalUpperBound":0,"scalingAdjustment":-1}]}}}}}},"LowerAlarm":{"id":"LowerAlarm","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/LowerAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/LowerAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"FFmpegWorkerServiceTaskCountTargetSQSScalingLowerPolicy7061B4B2"}],"alarmDescription":"Lower threshold scaling alarm","tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"comparisonOperator":"LessThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Maximum","threshold":0}}}}},"UpperPolicy":{"id":"UpperPolicy","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/UpperPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingAction","version":"2.220.0"},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/UpperPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"HospupVideoProcessingFFmpegWorkerServiceTaskCountTargetSQSScalingUpperPolicy29BD50FA","policyType":"StepScaling","scalingTargetId":{"Ref":"FFmpegWorkerServiceTaskCountTargetACF53073"},"stepScalingPolicyConfiguration":{"adjustmentType":"ChangeInCapacity","cooldown":30,"metricAggregationType":"Maximum","stepAdjustments":[{"metricIntervalLowerBound":0,"metricIntervalUpperBound":9,"scalingAdjustment":1},{"metricIntervalLowerBound":9,"metricIntervalUpperBound":29,"scalingAdjustment":5},{"metricIntervalLowerBound":29,"scalingAdjustment":10}]}}}}}},"UpperAlarm":{"id":"UpperAlarm","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/UpperAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/SQSScaling/UpperAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"FFmpegWorkerServiceTaskCountTargetSQSScalingUpperPolicyEC2019DC"}],"alarmDescription":"Upper threshold scaling alarm","tags":[{"key":"Component","value":"VideoProcessing"},{"key":"Environment","value":"Production"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"Hospup"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Maximum","threshold":1}}}}}}},"CPUScaling":{"id":"CPUScaling","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/CPUScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.220.0"},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/FFmpegWorkerService/TaskCount/Target/CPUScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"HospupVideoProcessingFFmpegWorkerServiceTaskCountTargetCPUScaling01449CA9","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"FFmpegWorkerServiceTaskCountTargetACF53073"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":300,"scaleOutCooldown":30,"targetValue":70}}}}}}}}}}}},"VideoDashboard":{"id":"VideoDashboard","path":"HospupVideoProcessing/VideoDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HospupVideoProcessing/VideoDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SQS Queue Depth\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","QueueName"]},"\",{\"stat\":\"Maximum\"}],[\"AWS/SQS\",\"NumberOfMessagesReceived\",\"QueueName\",\"",{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","QueueName"]},"\",{\"stat\":\"Sum\"}],[\"AWS/SQS\",\"NumberOfMessagesDeleted\",\"QueueName\",\"",{"Fn::GetAtt":["VideoJobsQueue6A6D39CE","QueueName"]},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Dead Letter Queue\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::GetAtt":["VideoJobsDLQ38A190E5","QueueName"]},"\",{\"stat\":\"Maximum\"}]],\"yAxis\":{}}}]}"]]},"dashboardName":"HospupVideoProcessing"}}}}},"ECRRepositoryURI":{"id":"ECRRepositoryURI","path":"HospupVideoProcessing/ECRRepositoryURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"SQSQueueURL":{"id":"SQSQueueURL","path":"HospupVideoProcessing/SQSQueueURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"SQSQueueARN":{"id":"SQSQueueARN","path":"HospupVideoProcessing/SQSQueueARN","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"ECSClusterName":{"id":"ECSClusterName","path":"HospupVideoProcessing/ECSClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"ECSServiceName":{"id":"ECSServiceName","path":"HospupVideoProcessing/ECSServiceName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"WarmPoolSize":{"id":"WarmPoolSize","path":"HospupVideoProcessing/WarmPoolSize","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"MaxWorkers":{"id":"MaxWorkers","path":"HospupVideoProcessing/MaxWorkers","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"DashboardURL":{"id":"DashboardURL","path":"HospupVideoProcessing/DashboardURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"LogGroupName":{"id":"LogGroupName","path":"HospupVideoProcessing/LogGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HospupVideoProcessing/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"HospupVideoProcessing/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HospupVideoProcessing/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HospupVideoProcessing/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}